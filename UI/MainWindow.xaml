<mah:MetroWindow x:Class="Skriptorium.UI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mah="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
        xmlns:avalon="https://github.com/Dirkster99/AvalonDock"
        xmlns:local="clr-namespace:Skriptorium.UI"
        Title="Skriptorium" TitleCharacterCasing="Normal"
        Height="750" Width="1000" WindowStartupLocation="CenterScreen"
        Icon="pack://application:,,,/Skriptorium.ico"
        Background="{DynamicResource MahApps.Brushes.Window.Background}"
        Foreground="{DynamicResource MahApps.Brushes.Text}">

    <DockPanel>
        <!-- Menüleiste -->
        <Menu DockPanel.Dock="Top" BorderBrush="Gray" FontSize="12" BorderThickness="0,1,0,1">
            <MenuItem Header="Skriptorium">
                <MenuItem Header="Über Skriptorium" InputGestureText="Strg + I" Click="MenuSkriptoriumUeber_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE946;" FontSize="14"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Einstellungen" InputGestureText="Strg + ," Click="MenuSkriptoriumEinstellungen_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE713;" FontSize="14"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator/>
                <MenuItem Header="Beenden" InputGestureText="Alt + F4" Click="MenuSkriptoriumBeenden_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE8BB;" FontSize="12"/>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>

            <MenuItem Header="Datei">
                <MenuItem Header="Neues Skript" InputGestureText="Strg + N" Click="MenuDateiNeuesSkript_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE710;" FontSize="14"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Öffnen" InputGestureText="Strg + O" Click="MenuDateiÖffnen_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xED25;" FontSize="17"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem x:Name="MenuDateiZuletztGeoeffnet" Header="Zuletzt geöffnet">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE81C;" FontSize="15"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator/>
                <MenuItem Header="Speichern" InputGestureText="Strg + S" Click="MenuDateiSpeichern_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE105;" FontSize="15"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Speichern unter…" InputGestureText="Strg + Shift + S" Click="MenuDateiSpeichernUnter_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE792;" FontSize="17"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Alles speichern" InputGestureText="Strg + Alt + S" Click="MenuDateiAllesSpeichern_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE105;" FontSize="15"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Schließen" InputGestureText="Strg + W" Click="MenuDateiSchließen_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE8BB;" FontSize="12"/>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>

            <MenuItem Header="Bearbeiten">
                <MenuItem Header="Rückgängig" InputGestureText="Strg + Z" Click="MenuBearbeitenRueckgaengig_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE7A7;" FontSize="15"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Wiederholen" InputGestureText="Strg + Y" Click="MenuBearbeitenWiederholen_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE7A6;" FontSize="15"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator/>
                <MenuItem Header="Ausschneiden" InputGestureText="Strg + X" Click="MenuBearbeitenAusschneiden_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE8C6;" FontSize="15"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Kopieren" InputGestureText="Strg + C" Click="MenuBearbeitenKopieren_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE8C8;" FontSize="15"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Einfügen" InputGestureText="Strg + V" Click="MenuBearbeitenEinfuegen_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE77F;" FontSize="15"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator/>
                <MenuItem Header="Duplizieren" InputGestureText="Strg + D" Click="MenuBearbeitenDuplizieren_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE8C8;" FontSize="15"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Alles auswählen" InputGestureText="Strg + A" Click="MenuBearbeitenAllesAuswaehlen_Click"/>
            </MenuItem>

            <MenuItem Header="Suchen">
                <MenuItem Header="Suchen und Ersetzen" InputGestureText="Strg + F" Click="FindInEditor_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE721;" FontSize="15"/>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>

            <MenuItem Header="Lesezeichen">
                <MenuItem Header="Lesezeichen setzen und entfernen" InputGestureText="F2" Click="MenuLesezeichenUmschalten_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE840;" FontSize="15"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Zum nächsten" InputGestureText="Strg + F2" Click="MenuLesezeichenNaechstes_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE72B;" FontSize="13"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Zum vorherigen" InputGestureText="Strg + Shift + F2" Click="MenuLesezeichenVorheriges_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE72A;" FontSize="13"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator/>
                <MenuItem Header="Alle Lesezeichen löschen" InputGestureText="Strg + Alt + F2" Click="MenuLesezeichenAlleLoeschen_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE74D;" FontSize="15"/>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>

            <MenuItem Header="Tools">
                <MenuItem Header="Syntax-Highlighting umschalten" InputGestureText="Strg + H" Click="SyntaxHighlightingUmschalten_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE7E6;" FontSize="14"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Syntax und Semantik prüfen" Click="SemanticCheckButton_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE768;" FontSize="14"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Code formatieren" InputGestureText="Strg + E" Click="MenuCodeFormatieren_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE71D;" FontSize="14"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator/>
                <MenuItem Header="NPC Generator" InputGestureText="Strg + G" Click="MenuDialogGenerator_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE77B;" FontSize="14"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Dialog Generator" InputGestureText="Strg + Shift + G" Click="MenuDialogGenerator_Click">
                    <MenuItem.Icon>
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xEBDB;" FontSize="14"/>
                    </MenuItem.Icon>
                </MenuItem>

            </MenuItem>
        </Menu>

        <!-- Statusleiste unten -->
        <StatusBar DockPanel.Dock="Bottom">
            <StatusBarItem HorizontalAlignment="Right" Margin="0,0,20,0">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Name="StatusPositionText" Text="Zeile 1, Spalte 1" Margin="0,0,10,0"/>
                    <TextBlock Name="StatusCharCountText" Text="0 Zeichen"/>
                </StackPanel>
            </StatusBarItem>
        </StatusBar>

        <!-- AvalonDock DockingManager -->
        <avalon:DockingManager x:Name="dockingManager"
                AnchorablesSource="{Binding Anchorables}"
                DocumentsSource="{Binding Documents}"
                ActiveContent="{Binding ActiveContent, Mode=TwoWay}"
                DocumentClosing="DockingManager_DocumentClosing"
                DocumentClosed="DockingManager_DocumentClosed">
          
            <!-- AB HIER: layout: statt avalonDock: -->
            <avalon:LayoutRoot>
                <avalon:LayoutPanel Orientation="Horizontal">
                    <avalon:LayoutDocumentPaneGroup>
                        <avalon:LayoutDocumentPane x:Name="documentPane"/>
                    </avalon:LayoutDocumentPaneGroup>
                </avalon:LayoutPanel>
            </avalon:LayoutRoot>
        </avalon:DockingManager>
    </DockPanel>
</mah:MetroWindow>